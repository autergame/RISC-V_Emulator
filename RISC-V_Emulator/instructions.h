#pragma once

#include <inttypes.h>

typedef struct instruction
{
	union
	{
		struct op
		{
			uint32_t opcode :  7; // 0000_0000_0000_0000_0000_0000_0111_1111
			uint32_t rest   : 25; // 1111_1111_1111_1111_1111_1111_1000_0000
		};

		struct R
		{
			uint32_t opcode : 7; // 0000_0000_0000_0000_0000_0000_0111_1111
			uint32_t rd     : 5; // 0000_0000_0000_0000_0000_1111_1000_0000
			uint32_t funct3 : 3; // 0000_0000_0000_0000_0111_0000_0000_0000
			uint32_t rs1    : 5; // 0000_0000_0000_1111_1000_0000_0000_0000
			uint32_t rs2    : 5; // 0000_0001_1111_0000_0000_0000_0000_0000
			uint32_t funct7 : 7; // 1111_1110_0000_0000_0000_0000_0000_0000
		} R;

		union  
		{
			struct I
			{
				uint32_t opcode  :  7; // 0000_0000_0000_0000_0000_0000_0111_1111
				uint32_t rd      :  5; // 0000_0000_0000_0000_0000_1111_1000_0000
				uint32_t funct3  :  3; // 0000_0000_0000_0000_0111_0000_0000_0000
				uint32_t rs1     :  5; // 0000_0000_0000_1111_1000_0000_0000_0000
				uint32_t imm11_0 : 12; // 1111_1111_1111_0000_0000_0000_0000_0000
			} I;

			struct shift
			{
				uint32_t opcode    : 7; // 0000_0000_0000_0000_0000_0000_0111_1111
				uint32_t rd        : 5; // 0000_0000_0000_0000_0000_1111_1000_0000
				uint32_t func3     : 3; // 0000_0000_0000_0000_0111_0000_0000_0000
				uint32_t rs1       : 5; // 0000_0000_0000_1111_1000_0000_0000_0000
				uint32_t shamt_4_0 : 5; // 0000_0001_1111_0000_0000_0000_0000_0000
				uint32_t func7     : 7; // 1111_1110_0000_0000_0000_0000_0000_0000
			} shift;
		};

		struct S
		{
			uint32_t opcode  : 7; // 0000_0000_0000_0000_0000_0000_0111_1111
			uint32_t imm4_0  : 5; // 0000_0000_0000_0000_0000_1111_1000_0000
			uint32_t funct3  : 3; // 0000_0000_0000_0000_0111_0000_0000_0000
			uint32_t rs1     : 5; // 0000_0000_0000_1111_1000_0000_0000_0000
			uint32_t rs2     : 5; // 0000_0001_1111_0000_0000_0000_0000_0000
			uint32_t imm11_5 : 7; // 1111_1110_0000_0000_0000_0000_0000_0000
		} S;

		struct B
		{
			uint32_t opcode  : 7; // 0000_0000_0000_0000_0000_0000_0111_1111
			uint32_t imm11   : 1; // 0000_0000_0000_0000_0000_0000_1000_0000
			uint32_t imm4_1  : 4; // 0000_0000_0000_0000_0000_1111_0000_0000
			uint32_t funct3  : 3; // 0000_0000_0000_0000_0111_0000_0000_0000
			uint32_t rs1     : 5; // 0000_0000_0000_1111_1000_0000_0000_0000
			uint32_t rs2     : 5; // 0000_0001_1111_0000_0000_0000_0000_0000
			uint32_t imm10_5 : 6; // 0111_1110_0000_0000_0000_0000_0000_0000
			uint32_t imm12   : 1; // 1000_0000_0000_0000_0000_0000_0000_0000
		} B;

		struct U
		{
			uint32_t opcode   :  7; // 0000_0000_0000_0000_0000_0000_0111_1111
			uint32_t rd       :  5; // 0000_0000_0000_0000_0000_1111_1000_0000
			uint32_t imm31_12 : 20; // 1111_1111_1111_1111_1111_0000_0000_0000
		} U;

		struct J
		{
			uint32_t opcode   :  7; // 0000_0000_0000_0000_0000_0000_0111_1111
			uint32_t rd       :  5; // 0000_0000_0000_0000_0000_1111_1000_0000
			uint32_t imm19_12 :  8; // 0000_0000_0000_1111_1111_0000_0000_0000
			uint32_t imm11    :  1; // 0000_0000_0001_0000_0000_0000_0000_0000
			uint32_t imm10_1  : 10; // 0111_1111_1110_0000_0000_0000_0000_0000
			uint32_t imm20    :  1; // 1000_0000_0000_0000_0000_0000_0000_0000
		} J;

		uint32_t bits;
	};
} instruction;